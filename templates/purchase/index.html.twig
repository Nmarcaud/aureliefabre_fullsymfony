{% extends "base.html.twig" %}

{% block title %}
    
{% endblock %}

{% block body %}

    <main class="container py-3">

        <h1>Mes commandes</h1>

        <table class="table">
            <thead>
                <tr>
                    <th>Num√©ro</th>
                    <th>Adresse</th>
                    <th>Date de commande</th>
                    <th>Produits</th>
                    <th>Total</th>
                </tr>
            </thead> 
            <tbody>
                {% for p in purchases %}
                    <tr>
                        <td>{{ p.id }}</td>
                        <td>{{ p.address }}<br>{{ p.zipCode }}, {{ p.city }}</td>
                        <td>{{ p.createdAt | date('d/m/Y H:i') }}</td>
                        <td>
                            <ul>
                                {# {{ dump(p.purchaseItems) }} #}
                                {% for purchaseItem in p.purchaseItems %}
                                    <li>{{ purchaseItem.quantity }} {{ purchaseItem.productName }} ( {{ purchaseItem.total | amount }} )</li>
                                {% endfor %}
                            </ul>
                        </td>
                        <td>{{ p.total | amount }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    
    </main>
    
{% endblock %}